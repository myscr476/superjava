<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>superjava ☕</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white font-mono p-6 min-h-screen">

  <div class="max-w-4xl mx-auto">
    <h1 class="text-4xl font-bold mb-2">superjava ☕</h1>
    <p class="text-gray-400 mb-6">Write, run, save, and copy your Java code — all inside your browser. Powered by Piston API.</p>

    <textarea id="code" class="w-full h-96 bg-black text-green-400 p-4 rounded resize-none" spellcheck="false">// Type your Java code here
public class Main {
    public static void main(String[] args) {
        System.out.println("Hello from superjava!");
    }
}</textarea>

    <div class="mt-4 flex gap-4 flex-wrap">
      <button onclick="runCode()" class="bg-yellow-500 hover:bg-yellow-600 px-6 py-2 rounded font-bold">▶️ Run</button>
      <button onclick="saveCode()" class="bg-green-600 hover:bg-green-700 px-6 py-2 rounded font-bold">💾 Save .java</button>
      <button onclick="copyCode()" class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded font-bold">📋 Copy</button>
      <button onclick="clearEditor()" class="bg-red-600 hover:bg-red-700 px-6 py-2 rounded font-bold">🧹 Clear</button>
    </div>

    <div id="outputBox" class="mt-6 bg-gray-800 p-4 rounded hidden">
      <h2 class="text-xl font-bold mb-2">💡 Output:</h2>
      <pre id="output" class="text-green-400 whitespace-pre-wrap"></pre>
    </div>

    <p class="mt-10 text-sm text-gray-500">Made by Athaya 👑 — using HTML, TailwindCSS, and Piston API.</p>
  </div>

  <script>
    function saveCode() {
      const code = document.getElementById('code').value;
      const blob = new Blob([code], { type: 'text/plain' });
      const link = document.createElement('a');
      link.download = 'Main.java';
      link.href = URL.createObjectURL(blob);
      link.click();
    }

    function copyCode() {
      const textarea = document.getElementById('code');
      textarea.select();
      document.execCommand('copy');
      alert("✅ Code copied to clipboard!");
    }

    function clearEditor() {
      document.getElementById('code').value = '';
      document.getElementById('outputBox').classList.add('hidden');
    }

    function runCode() {
      const code = document.getElementById('code').value;
      const outputBox = document.getElementById('outputBox');
      const output = document.getElementById('output');

      outputBox.classList.remove('hidden');
      output.textContent = "⏳ Running your code...";

      fetch("https://emkc.org/api/v2/piston/execute", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          language: "java",
          version: "15.0.2",
          files: [{ name: "Main.java", content: code }]
        })
      })
      .then(res => res.json())
      .then(data => {
        output.textContent = data.run?.stdout || data.run?.stderr || "⚠️ No output.";
      })
      .catch(err => {
        output.textContent = "❌ Error while running code:\n" + err;
      });
    }
  </script>
</body>
</html>